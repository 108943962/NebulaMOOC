<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>验证码</title>
    <script src="jquery-3.3.1.js"></script>
    <script type="text/javascript">
        /**         * 单击验证码图片的时候刷新当前验证码接口，从新获取新的验证码         */
        function refresh() {
            document.getElementById("img").src = "https://127.0.0.1/Verification_Code?" + Math.random();
        }

        /* 发送用户识别的图片验证码*/
        function sendi() {
            $.ajax({
                type: "POST",
                url: "/Img_Check_Code",
                contentType: 'application/x-www-form-urlencoded;charset=utf-8',
                data: {"code": $("#yzm").val()},
                dataType: "text",
                success: function (data) {
                    alert(data.toString());
                    refresh();
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR);
                    alert(textStatus);
                    alert(errorThrown);
                }

            });
        }

        /*请求邮件验证码*/
        function getemail() {
            $.ajax({
                type: "POST",
                url: "/Email_Get_Code",
                contentType: 'application/x-www-form-urlencoded;charset=utf-8',
                data: {"address": $("#add").val()},
                dataType: "text",
                success: function (data) {
                    alert(data.toString());
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR);
                    alert(textStatus);
                    alert(errorThrown);
                }
            });
        }

        /*发送用户收到的邮箱验证码*/
        function sendm() {
            $.ajax({
                type: "POST",
                url: "/Email_Check_Code",
                contentType: 'application/x-www-form-urlencoded;charset=utf-8',
                data: {"mailcode": $("#mail").val()},
                dataType: "text",
                success: function (data) {
                    alert(data.toString());
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(jqXHR);
                    alert(textStatus);
                    alert(errorThrown);
                }
            });
        }
    </script>
</head>

<body>
<p>验证码: <input id="yzm" type="text"/>
    <img alt="" id="img" onclick="refresh()" src="/Verification_Code"/></p>
<input onclick="sendi()" type="button" value="Submit"/>
<p>邮箱: <input id="add" type="text"/>
    <input onclick="getemail()" type="button" value="发送邮件">
<p>邮件验证码: <input id="mail" type="text"/>
    <input onclick="sendm()" type="button" value="Submit"/>
</body>
</html>
